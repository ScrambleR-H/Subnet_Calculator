<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PhishGuard â€” Threat Intelligence System</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Exo+2:wght@300;400;600&family=VT323&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
  --red:#ff0a37;--red2:#cc0028;--orange:#ff6a00;--yellow:#ffd700;
  --green:#00ff9d;--green2:#00cc7a;--cyan:#00f0ff;
  --bg:#02030a;--bg2:#050810;--panel:#080d16;--panel2:#0a1220;
  --border:#0f2035;--border2:#162840;
  --text:#c8e0f0;--text2:#5a8aaa;--text3:#2a5570;
  --font-head:'Orbitron',monospace;--font-body:'Exo 2',sans-serif;--font-mono:'VT323',monospace;
}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:var(--font-body);min-height:100vh;overflow-x:hidden;cursor:crosshair}
#bgCanvas{position:fixed;inset:0;z-index:0;opacity:.6}
body::after{content:'';position:fixed;inset:0;background:repeating-linear-gradient(0deg,transparent,transparent 2px,rgba(0,0,0,.12) 2px,rgba(0,0,0,.12) 4px);pointer-events:none;z-index:999;animation:scanShift 10s linear infinite}
@keyframes scanShift{0%{background-position:0 0}100%{background-position:0 200px}}
.wrap{position:relative;z-index:2;max-width:1100px;margin:0 auto;padding:24px 20px 80px}

/* HEADER */
header{margin-bottom:32px;animation:bootIn .8s ease both}
@keyframes bootIn{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
.hud-top{display:flex;align-items:flex-start;justify-content:space-between;gap:20px;flex-wrap:wrap}
.brand{flex:1;min-width:260px}
.brand-eyebrow{font-family:var(--font-mono);font-size:1rem;color:var(--text3);letter-spacing:4px;text-transform:uppercase;margin-bottom:2px}
.brand-name{font-family:var(--font-head);font-size:clamp(2rem,5vw,3.8rem);font-weight:900;line-height:.92;text-transform:uppercase;color:#fff;text-shadow:0 0 50px rgba(255,10,55,.5),0 0 100px rgba(255,10,55,.15)}
.brand-name em{color:var(--red);font-style:normal;animation:nameGlow 2s ease-in-out infinite alternate}
@keyframes nameGlow{from{text-shadow:0 0 20px rgba(255,10,55,.5)}to{text-shadow:0 0 40px rgba(255,10,55,1),0 0 80px rgba(255,10,55,.4)}}
.brand-sub{font-family:var(--font-mono);font-size:.95rem;color:var(--red);letter-spacing:3px;margin-top:8px;animation:glitch 5s infinite}
@keyframes glitch{0%,92%,100%{opacity:1;transform:none;text-shadow:none}93%{transform:translateX(-4px);text-shadow:4px 0 var(--cyan);opacity:.9}94%{transform:translateX(4px);text-shadow:-4px 0 var(--red);opacity:.9}95%{transform:none;opacity:1}}
.cert-strip{display:flex;gap:8px;margin-top:14px;flex-wrap:wrap}
.cert{padding:5px 16px;font-family:var(--font-mono);font-size:.72rem;color:var(--text3);letter-spacing:2px;
  background:rgba(255,10,55,.04);border:1px solid rgba(255,10,55,.2);
  clip-path:polygon(10px 0,100% 0,100% 100%,0 100%,0 10px);
  border-left:3px solid var(--red)}
.cert span{color:var(--cyan)}

.hud-stats{display:grid;grid-template-columns:repeat(3,90px);gap:6px}
.stat-box{background:var(--panel);border:1px solid var(--border);padding:10px 12px;position:relative;overflow:hidden;text-align:center}
.stat-box::after{content:'';position:absolute;top:0;left:0;right:0;height:1px;background:linear-gradient(90deg,transparent,var(--red),transparent);animation:topScan 4s ease-in-out infinite}
@keyframes topScan{0%,100%{transform:translateX(-100%);opacity:0}50%{transform:translateX(100%);opacity:1}}
.stat-label{font-family:var(--font-mono);font-size:.62rem;color:var(--text3);letter-spacing:1px;display:block}
.stat-val{font-family:var(--font-head);font-size:1.1rem;color:var(--red);font-weight:700;display:block;margin-top:2px}

/* MAIN GRID */
.main-grid{display:grid;grid-template-columns:1fr 320px;gap:14px;align-items:start}
@media(max-width:800px){.main-grid{grid-template-columns:1fr}}

/* PANEL */
.panel{background:var(--panel);border:1px solid var(--border);position:relative;overflow:hidden}
.panel::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,10,55,.025) 0%,transparent 40%);pointer-events:none}
/* corner notches */
.panel::after{content:'';position:absolute;top:0;left:0;width:14px;height:14px;
  border-top:2px solid var(--red);border-left:2px solid var(--red);pointer-events:none}
.corner-br-deco{position:absolute;bottom:0;right:0;width:14px;height:14px;
  border-bottom:2px solid var(--red);border-right:2px solid var(--red);pointer-events:none;z-index:1}

.panel-hd{padding:11px 18px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px;background:rgba(0,0,0,.3)}
.hd-dot{width:7px;height:7px;background:var(--red);box-shadow:0 0 10px var(--red);border-radius:0;animation:dotBlink 2s infinite}
@keyframes dotBlink{0%,100%{opacity:1}50%{opacity:.2}}
.hd-title{font-family:var(--font-head);font-size:.58rem;letter-spacing:3px;color:var(--text2);text-transform:uppercase;flex:1}
.hd-badge{font-family:var(--font-mono);font-size:.72rem;color:var(--text3)}

/* INPUT */
.input-wrap{padding:16px;position:relative}
.load-overlay{display:none;position:absolute;inset:0;background:rgba(2,3,10,.92);z-index:10;
  flex-direction:column;align-items:center;justify-content:center;gap:14px;backdrop-filter:blur(3px)}
.load-overlay.on{display:flex}
.spin-outer{width:72px;height:72px;position:relative}
.sring{position:absolute;inset:0;border:2px solid transparent;border-radius:50%;animation:spin 1s linear infinite}
.sring:nth-child(1){border-top-color:var(--red);animation-duration:.7s}
.sring:nth-child(2){inset:10px;border-top-color:var(--orange);animation-duration:1.1s;animation-direction:reverse}
.sring:nth-child(3){inset:20px;border-top-color:var(--yellow);animation-duration:1.6s}
@keyframes spin{to{transform:rotate(360deg)}}
.load-lbl{font-family:var(--font-mono);font-size:1.1rem;color:var(--red);letter-spacing:3px;animation:blink2 1s infinite}
@keyframes blink2{0%,100%{opacity:1}50%{opacity:.2}}
.load-log{font-family:var(--font-mono);font-size:.68rem;color:var(--text3);text-align:center;line-height:2;max-width:250px}

.in-meta{display:flex;justify-content:space-between;margin-bottom:7px}
.in-lbl{font-family:var(--font-mono);font-size:.68rem;color:var(--text3);letter-spacing:2px}
.char-c{font-family:var(--font-mono);font-size:.68rem;color:var(--text3)}
textarea{width:100%;min-height:210px;background:rgba(0,0,0,.55);border:1px solid var(--border2);
  color:var(--text);font-family:'Courier New',monospace;font-size:.78rem;line-height:1.75;padding:13px;
  resize:vertical;outline:none;transition:border-color .2s,box-shadow .2s;caret-color:var(--red)}
textarea:focus{border-color:rgba(255,10,55,.5);box-shadow:0 0 25px rgba(255,10,55,.1),inset 0 0 25px rgba(255,10,55,.03)}
textarea::placeholder{color:var(--text3);font-style:italic}
.ex-row{display:flex;gap:6px;margin-top:9px;flex-wrap:wrap;align-items:center}
.ex-lbl{font-family:var(--font-mono);font-size:.6rem;color:var(--text3);letter-spacing:1px}
.ex-btn{padding:4px 11px;background:transparent;border:1px solid var(--border2);color:var(--text3);
  font-family:var(--font-mono);font-size:.65rem;letter-spacing:1px;cursor:pointer;transition:all .2s;
  clip-path:polygon(6px 0,100% 0,100% 100%,0 100%,0 6px)}
.ex-btn:hover{border-color:var(--red);color:var(--red);background:rgba(255,10,55,.07);box-shadow:0 0 12px rgba(255,10,55,.2)}

.btn-row{padding:0 16px 16px;display:flex;gap:8px}
.btn-scan{flex:1;padding:15px;background:linear-gradient(135deg,#990020,var(--red));border:none;
  color:#fff;font-family:var(--font-head);font-size:.82rem;font-weight:700;letter-spacing:4px;
  text-transform:uppercase;cursor:pointer;position:relative;overflow:hidden;transition:transform .15s,box-shadow .2s;
  clip-path:polygon(12px 0,100% 0,100% calc(100% - 0px),calc(100% - 12px) 100%,0 100%,0 12px)}
.btn-scan::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.18),transparent);transform:translateX(-100%);transition:transform .35s}
.btn-scan:hover::before{transform:translateX(100%)}
.btn-scan:hover{transform:translateY(-2px);box-shadow:0 6px 35px rgba(255,10,55,.5),0 0 0 1px rgba(255,10,55,.3)}
.btn-scan:disabled{opacity:.35;cursor:not-allowed;transform:none;box-shadow:none}
.btn-inner{display:flex;align-items:center;justify-content:center;gap:10px}
.btn-spinner{width:16px;height:16px;border:2px solid rgba(255,255,255,.4);border-top-color:#fff;border-radius:50%;display:none;animation:spin .8s linear infinite}
.btn-clr{padding:15px 18px;background:transparent;border:1px solid var(--border2);color:var(--text3);
  font-family:var(--font-mono);font-size:.68rem;cursor:pointer;transition:all .2s;letter-spacing:1px}
.btn-clr:hover{border-color:var(--orange);color:var(--orange);background:rgba(255,106,0,.06)}

/* SIDEBAR */
.sidebar{display:flex;flex-direction:column;gap:12px}

/* SCORE */
.score-panel{padding:22px 16px;text-align:center}
.score-ring{position:relative;width:140px;height:140px;margin:0 auto 14px}
.score-ring svg{position:absolute;inset:0;transform:rotate(-90deg)}
.score-inner{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center}
.score-n{font-family:var(--font-head);font-size:2.6rem;font-weight:900;line-height:1;color:#fff}
.score-d{font-family:var(--font-mono);font-size:.65rem;color:var(--text3)}
.verdict{display:inline-block;padding:7px 22px;font-family:var(--font-head);font-size:.82rem;font-weight:700;
  letter-spacing:4px;text-transform:uppercase;border:2px solid;margin-bottom:10px;
  text-shadow:0 0 15px currentColor;box-shadow:0 0 20px -5px currentColor}
.vtag{font-size:.78rem;color:var(--text2);line-height:1.5;padding:0 8px}

/* RADAR */
.radar-wrap{padding:18px 16px;text-align:center}
.radar-leg{display:grid;grid-template-columns:1fr 1fr;gap:5px;margin-top:12px}
.rleg{display:flex;align-items:center;gap:5px;font-family:var(--font-mono);font-size:.62rem;color:var(--text3)}
.rdot{width:5px;height:5px;border-radius:50%}

/* METERS */
.meters{padding:14px 16px;display:flex;flex-direction:column;gap:12px}
.m-item{}
.m-hd{display:flex;justify-content:space-between;margin-bottom:4px}
.m-name{font-family:var(--font-mono);font-size:.62rem;color:var(--text2);letter-spacing:1px}
.m-val{font-family:var(--font-head);font-size:.7rem;font-weight:700}
.m-track{height:5px;background:var(--border);overflow:hidden}
.m-fill{height:100%;width:0;transition:width 1.4s cubic-bezier(.23,1,.32,1)}

/* RESULTS */
.results-panel{margin-top:12px;display:none;animation:riseIn .4s ease both}
@keyframes riseIn{from{opacity:0;transform:translateY(25px)}to{opacity:1;transform:translateY(0)}}
.results-panel.on{display:block}
.tabs{display:flex;border-bottom:1px solid var(--border)}
.tab{padding:11px 18px;font-family:var(--font-head);font-size:.58rem;letter-spacing:2px;
  color:var(--text3);cursor:pointer;border-bottom:2px solid transparent;transition:all .2s;text-transform:uppercase}
.tab:hover{color:var(--text)}
.tab.act{color:var(--red);border-bottom-color:var(--red)}
.tc{display:none;padding:18px 16px;animation:fadeTab .25s ease both}
.tc.act{display:block}
@keyframes fadeTab{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.explain{font-size:.84rem;line-height:1.9;color:var(--text2)}
.explain strong{color:var(--red)}

.flag{display:flex;gap:11px;padding:11px;margin-bottom:7px;border-left:3px solid;
  background:rgba(0,0,0,.3);animation:slideR .3s ease both}
@keyframes slideR{from{opacity:0;transform:translateX(-12px)}to{opacity:1;transform:translateX(0)}}
.flag.critical{border-left-color:var(--red);background:rgba(255,10,55,.07)}
.flag.warning{border-left-color:var(--orange);background:rgba(255,106,0,.06)}
.flag.info{border-left-color:var(--cyan);background:rgba(0,240,255,.04)}
.fi{font-size:1rem;flex-shrink:0}
.ft{font-family:var(--font-head);font-size:.75rem;font-weight:700;letter-spacing:.5px;margin-bottom:3px}
.flag.critical .ft{color:var(--red)}.flag.warning .ft{color:var(--orange)}.flag.info .ft{color:var(--cyan)}
.fd{font-size:.75rem;color:var(--text2);line-height:1.5}

.rec{display:flex;gap:11px;align-items:flex-start;padding:9px 0;border-bottom:1px solid var(--border)}
.rec:last-child{border:none}
.rn{font-family:var(--font-head);font-size:.65rem;color:var(--red);background:rgba(255,10,55,.1);
  border:1px solid rgba(255,10,55,.25);width:22px;height:22px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-weight:700}
.rt{font-size:.78rem;color:var(--text2);line-height:1.6}

/* ALERT FLASH */
.alert-flash{position:fixed;inset:0;pointer-events:none;z-index:998;opacity:0}
.alert-flash.fire{animation:redFlash .8s ease forwards}
@keyframes redFlash{0%{opacity:0}15%{opacity:1;background:rgba(255,10,55,.3)}100%{opacity:0}}
</style>
</head>
<body>
<canvas id="bgCanvas"></canvas>
<div class="alert-flash" id="alertFlash"></div>

<div class="wrap">

  <header>
    <div class="hud-top">
      <div class="brand">
        <div class="brand-eyebrow">// THREAT INTELLIGENCE SYSTEM v4.1</div>
        <div class="brand-name">Phish<em>Guard</em></div>
        <div class="brand-sub">â—ˆ AI-POWERED EMAIL THREAT ANALYZER â—ˆ</div>
        <div class="cert-strip">
          <div class="cert"><span>CERT â€º</span> CYBERSECURITY â€” MASTERCARD</div>
          <div class="cert"><span>CERT â€º</span> GENERATIVE AI â€” LLM ENGINEERING</div>
        </div>
      </div>
      <div class="hud-stats">
        <div class="stat-box"><span class="stat-label">STATUS</span><span class="stat-val" id="sysStatus">READY</span></div>
        <div class="stat-box"><span class="stat-label">SCANS</span><span class="stat-val" id="scanCount">000</span></div>
        <div class="stat-box"><span class="stat-label">THREAT</span><span class="stat-val" id="threatLvl">â€”</span></div>
     
        <div class="stat-box"><span class="stat-label">MODEL</span><span class="stat-val" style="color:var(--green);font-size:.85rem">SONNET</span></div>
        <div class="stat-box"><span class="stat-label">UPTIME</span><span class="stat-val" id="uptime" style="color:var(--cyan);font-size:.9rem">00:00</span></div>
      </div>
    </div>
  </header>

  <div class="main-grid">

    <!-- LEFT -->
    <div>
      <div class="panel" style="margin-bottom:12px">
        <div class="corner-br-deco"></div>
        <div class="panel-hd">
          <div class="hd-dot"></div>
          <div class="hd-title">EMAIL INPUT TERMINAL</div>
          <div class="hd-badge" id="inputStatus">AWAITING INPUT</div>
        </div>
        <div class="input-wrap">
          <div class="load-overlay" id="loadOverlay">
            <div class="spin-outer">
              <div class="sring"></div><div class="sring"></div><div class="sring"></div>
            </div>
            <div class="load-lbl">SCANNING THREAT...</div>
            <div class="load-log" id="loadLog"></div>
          </div>
          <div class="in-meta">
            <div class="in-lbl">// PASTE SUSPICIOUS EMAIL</div>
            <div class="char-c" id="charCount">0 CHARS</div>
          </div>
          <textarea id="emailInput" placeholder="Paste email content here â€” subject, headers, full body...

From: security@paypa1-alerts.com
Subject: URGENT: Account suspended!

Dear Customer, click here to verify..."></textarea>
          <div class="ex-row">
            <span class="ex-lbl">LOAD SAMPLE â†’</span>
            <button class="ex-btn" onclick="loadEx('phish')">âš  PHISHING</button>
            <button class="ex-btn" onclick="loadEx('safe')">âœ“ LEGIT</button>
            <button class="ex-btn" onclick="loadEx('spear')">âš¡ SPEAR</button>
            <button class="ex-btn" onclick="loadEx('bec')">â˜  BEC</button>
          </div>
        </div>
        <div class="btn-row">
          <button class="btn-scan" id="scanBtn" onclick="runScan()">
            <div class="btn-inner">
              <div class="btn-spinner" id="btnSpinner"></div>
              <span id="btnTxt">â—ˆ INITIATE THREAT SCAN</span>
            </div>
          </button>
          <button class="btn-clr" onclick="clearAll()">CLR</button>
        </div>
      </div>

      <!-- Results -->
      <div class="panel results-panel" id="resultsPanel">
        <div class="corner-br-deco"></div>
        <div class="panel-hd">
          <div class="hd-dot" style="background:var(--green);box-shadow:0 0 10px var(--green)"></div>
          <div class="hd-title">THREAT ANALYSIS REPORT</div>
          <div class="hd-badge" id="rptTime">â€”</div>
        </div>
        <div class="tabs">
          <div class="tab act" onclick="showTab('analysis',this)">ANALYSIS</div>
          <div class="tab" onclick="showTab('flags',this)">RED FLAGS</div>
          <div class="tab" onclick="showTab('recs',this)">ACTIONS</div>
        </div>
        <div class="tc act" id="tc-analysis"><div class="explain" id="explainEl"></div></div>
        <div class="tc" id="tc-flags"><div id="flagsEl"></div></div>
        <div class="tc" id="tc-recs"><div id="recsEl"></div></div>
      </div>
    </div>

    <!-- SIDEBAR -->
    <div class="sidebar">

      <!-- Score -->
      <div class="panel">
        <div class="corner-br-deco"></div>
        <div class="panel-hd">
          <div class="hd-dot"></div>
          <div class="hd-title">RISK ASSESSMENT</div>
        </div>
        <div class="score-panel">
          <div class="score-ring">
            <svg width="140" height="140" viewBox="0 0 140 140">
              <circle cx="70" cy="70" r="58" fill="none" stroke="#0f2035" stroke-width="9"/>
              <circle id="scoreArc" cx="70" cy="70" r="58" fill="none" stroke="var(--red)" stroke-width="9"
                stroke-linecap="round" stroke-dasharray="364.42" stroke-dashoffset="364.42"
                style="transition:stroke-dashoffset 1.5s cubic-bezier(.23,1,.32,1),stroke .5s"/>
            </svg>
            <div class="score-inner">
              <div class="score-n" id="scoreN" style="color:var(--red)">â€”</div>
              <div class="score-d">/100</div>
            </div>
          </div>
          <div class="verdict" id="verdictEl" style="color:var(--text3);border-color:var(--text3)">AWAITING SCAN</div>
          <div class="vtag" id="vtagEl">Submit an email to begin threat analysis</div>
        </div>
      </div>

      <!-- Radar -->
      <div class="panel">
        <div class="corner-br-deco"></div>
        <div class="panel-hd">
          <div class="hd-dot" style="background:var(--cyan);box-shadow:0 0 10px var(--cyan)"></div>
          <div class="hd-title">THREAT RADAR</div>
        </div>
        <div class="radar-wrap">
          <canvas id="radarCvs" width="250" height="210"></canvas>
          <div class="radar-leg">
            <div class="rleg"><div class="rdot" style="background:var(--red)"></div>LINKS</div>
            <div class="rleg"><div class="rdot" style="background:var(--orange)"></div>SPOOFING</div>
            <div class="rleg"><div class="rdot" style="background:var(--yellow)"></div>URGENCY</div>
            <div class="rleg"><div class="rdot" style="background:var(--cyan)"></div>SOCIAL</div>
          </div>
        </div>
      </div>

      <!-- Meters -->
      <div class="panel">
        <div class="corner-br-deco"></div>
        <div class="panel-hd">
          <div class="hd-dot" style="background:var(--orange);box-shadow:0 0 10px var(--orange)"></div>
          <div class="hd-title">THREAT VECTORS</div>
        </div>
        <div class="meters">
          <div class="m-item">
            <div class="m-hd"><span class="m-name">SUSPICIOUS LINKS</span><span class="m-val" id="mv0" style="color:var(--red)">â€”</span></div>
            <div class="m-track"><div class="m-fill" id="mf0" style="background:linear-gradient(90deg,#880020,var(--red))"></div></div>
          </div>
          <div class="m-item">
            <div class="m-hd"><span class="m-name">SENDER SPOOFING</span><span class="m-val" id="mv1" style="color:var(--orange)">â€”</span></div>
            <div class="m-track"><div class="m-fill" id="mf1" style="background:linear-gradient(90deg,#882200,var(--orange))"></div></div>
          </div>
          <div class="m-item">
            <div class="m-hd"><span class="m-name">URGENCY TACTICS</span><span class="m-val" id="mv2" style="color:var(--yellow)">â€”</span></div>
            <div class="m-track"><div class="m-fill" id="mf2" style="background:linear-gradient(90deg,#886600,var(--yellow))"></div></div>
          </div>
          <div class="m-item">
            <div class="m-hd"><span class="m-name">SOCIAL ENGINEERING</span><span class="m-val" id="mv3" style="color:var(--cyan)">â€”</span></div>
            <div class="m-track"><div class="m-fill" id="mf3" style="background:linear-gradient(90deg,#006677,var(--cyan))"></div></div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
// â”€â”€â”€ PARTICLE BACKGROUND â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const bgCvs=document.getElementById('bgCanvas'),bctx=bgCvs.getContext('2d');
let W=0,H=0,pts=[];
function resizeBg(){W=bgCvs.width=window.innerWidth;H=bgCvs.height=window.innerHeight}
resizeBg();window.addEventListener('resize',resizeBg);
for(let i=0;i<90;i++)pts.push({x:Math.random()*W,y:Math.random()*H,vx:(Math.random()-.5)*.25,vy:(Math.random()-.5)*.25,r:Math.random()*1.5+.4,a:Math.random()*.4+.1});
function drawBg(){
  bctx.clearRect(0,0,W,H);
  pts.forEach(p=>{
    p.x=(p.x+p.vx+W)%W;p.y=(p.y+p.vy+H)%H;
    bctx.beginPath();bctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    bctx.fillStyle=`rgba(255,10,55,${p.a})`;bctx.fill();
  });
  for(let i=0;i<pts.length;i++)for(let j=i+1;j<pts.length;j++){
    const dx=pts[i].x-pts[j].x,dy=pts[i].y-pts[j].y,d=Math.sqrt(dx*dx+dy*dy);
    if(d<110){bctx.beginPath();bctx.moveTo(pts[i].x,pts[i].y);bctx.lineTo(pts[j].x,pts[j].y);
      bctx.strokeStyle=`rgba(255,10,55,${.07*(1-d/110)})`;bctx.lineWidth=.4;bctx.stroke()}
  }
  requestAnimationFrame(drawBg);
}
drawBg();

// â”€â”€â”€ UPTIME â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let t0=Date.now(),scans=0;
setInterval(()=>{const e=Math.floor((Date.now()-t0)/1000);document.getElementById('uptime').textContent=`${String(Math.floor(e/60)).padStart(2,'0')}:${String(e%60).padStart(2,'0')}`;},1000);

// â”€â”€â”€ CHAR COUNT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('emailInput').addEventListener('input',function(){
  document.getElementById('charCount').textContent=this.value.length+' CHARS';
  document.getElementById('inputStatus').textContent=this.value.length?'INPUT READY':'AWAITING INPUT';
});

// â”€â”€â”€ RADAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const rCvs=document.getElementById('radarCvs'),rctx=rCvs.getContext('2d');
let rv={a:0,b:0,c:0,d:0},rt={a:0,b:0,c:0,d:0};
function drawRadar(){
  const w=rCvs.width,h=rCvs.height,cx=w/2,cy=h/2-5,R=82;
  rctx.clearRect(0,0,w,h);
  const N=4,step=Math.PI*2/N;
  // grid
  [.25,.5,.75,1].forEach(f=>{
    rctx.beginPath();
    for(let i=0;i<N;i++){const a=i*step-Math.PI/2;i===0?rctx.moveTo(cx+Math.cos(a)*R*f,cy+Math.sin(a)*R*f):rctx.lineTo(cx+Math.cos(a)*R*f,cy+Math.sin(a)*R*f)}
    rctx.closePath();rctx.strokeStyle=f===1?'rgba(255,10,55,.35)':'rgba(15,32,53,.7)';rctx.lineWidth=f===1?1:.5;rctx.stroke();
  });
  for(let i=0;i<N;i++){const a=i*step-Math.PI/2;rctx.beginPath();rctx.moveTo(cx,cy);rctx.lineTo(cx+Math.cos(a)*R,cy+Math.sin(a)*R);rctx.strokeStyle='rgba(15,32,53,.8)';rctx.lineWidth=1;rctx.stroke();}
  // data
  const vals=[rv.a/100,rv.b/100,rv.c/100,rv.d/100];
  rctx.beginPath();
  vals.forEach((v,i)=>{const a=i*step-Math.PI/2;i===0?rctx.moveTo(cx+Math.cos(a)*R*v,cy+Math.sin(a)*R*v):rctx.lineTo(cx+Math.cos(a)*R*v,cy+Math.sin(a)*R*v)});
  rctx.closePath();rctx.fillStyle='rgba(255,10,55,.2)';rctx.fill();rctx.strokeStyle='rgba(255,10,55,.85)';rctx.lineWidth=2;rctx.stroke();
  const colors=['#ff0a37','#ff6a00','#ffd700','#00f0ff'];
  vals.forEach((v,i)=>{const a=i*step-Math.PI/2,x=cx+Math.cos(a)*R*v,y=cy+Math.sin(a)*R*v;rctx.beginPath();rctx.arc(x,y,4,0,Math.PI*2);rctx.fillStyle=colors[i];rctx.fill();});
  // labels
  rctx.font='bold 8px Orbitron,monospace';rctx.textAlign='center';
  ['LINKS','SPOOF','URGENCY','SOCIAL'].forEach((lb,i)=>{
    const a=i*step-Math.PI/2,x=cx+Math.cos(a)*(R+16),y=cy+Math.sin(a)*(R+16)+4;
    rctx.fillStyle='rgba(90,138,170,.8)';rctx.fillText(lb,x,y);
  });
}
function animRadar(){
  let changed=false;
  ['a','b','c','d'].forEach(k=>{if(Math.abs(rv[k]-rt[k])>0.5){rv[k]+=(rt[k]-rv[k])*.1;changed=true;}else rv[k]=rt[k];});
  drawRadar();requestAnimationFrame(animRadar);
}
animRadar();

// â”€â”€â”€ SAMPLES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const EX={
  phish:`From: security-alert@paypa1-accounts.com\nTo: customer@gmail.com\nSubject: âš ï¸ URGENT: Your account will be PERMANENTLY CLOSED in 24 hours!\n\nDear Valued Customer,\n\nWe have detected SUSPICIOUS activity on your PayPal account. Your account has been TEMPORARILY LIMITED due to a security violation.\n\nIMPORTANT: You MUST verify your information within 24 HOURS or your account will be PERMANENTLY CLOSED and all funds FROZEN.\n\nâž¡ï¸ VERIFY NOW: http://paypal-secure.account-verify-now.xyz/login?user=12847\n\nRequired verification:\n- Full name & date of birth\n- Credit card number and CVV\n- Social Security Number\n- Online banking password\n\nThis is your FINAL WARNING. Failure to act will result in legal action.\n\nPayPal Security Department`,
  safe:`From: newsletter@github.com\nTo: developer@yourcompany.com\nSubject: Your GitHub digest for the week\n\nHi,\n\nHere's what's new in the repositories you follow this week.\n\nâ€¢ GitHub Copilot now supports 15 programming languages\nâ€¢ Improved code search is now available for all users  \nâ€¢ New Dependabot security alerts dashboard launched\n\nVisit github.com to see your full activity feed.\n\nYou're receiving this because you subscribed to GitHub Digest.\nUnsubscribe: github.com/settings/notifications\n\nGitHub, Inc. â€” 88 Colin P Kelly Jr St, San Francisco, CA 94107`,
  spear:`From: ceo.michael.chen@amaz0n-corp.net\nTo: accounts.payable@targetcompany.com\nSubject: CONFIDENTIAL â€” Urgent Wire Transfer Authorization\n\nHi Jennifer,\n\nThis is Michael Chen, CEO. I'm in a confidential board meeting and need your immediate help with a time-sensitive matter.\n\nPlease process an urgent wire transfer of $87,500 to our new vendor:\nBank: First Capital Trust\nAccount: 8834-2291-0047\nRouting: 021000021\nRef: Q4-ACQ-CONF\n\nThis must be completed before 3PM today. Do NOT discuss with the CFO or anyone else â€” this relates to an NDA-protected acquisition.\n\nConfirm via email only â€” I can't take calls right now.\n\nMichael Chen, CEO`,
  bec:`From: it-security@company-helpdesk-portal.com\nTo: all.employees@yourcompany.com\nSubject: MANDATORY: Emergency Password Reset â€” Complete Within 2 Hours\n\nDear Employee,\n\nOur security team has detected a critical breach in our email infrastructure. ALL employees must immediately reset their credentials.\n\nACTION REQUIRED within 2 hours or your account will be locked:\n\n1. Visit: http://company-secure-login.pw/emergency-reset\n2. Enter your current username and password  \n3. Set your new password\n\nEmployees who fail to complete this will lose access to all company systems including Slack, email, and the VPN.\n\nDo not reply â€” use the portal only.\n\nIT Security Team`
};
function loadEx(t){const v=EX[t];document.getElementById('emailInput').value=v;document.getElementById('charCount').textContent=v.length+' CHARS';document.getElementById('inputStatus').textContent='INPUT READY';}
function clearAll(){document.getElementById('emailInput').value='';document.getElementById('charCount').textContent='0 CHARS';document.getElementById('inputStatus').textContent='AWAITING INPUT';document.getElementById('resultsPanel').classList.remove('on');document.getElementById('sysStatus').textContent='READY';document.getElementById('threatLvl').textContent='â€”';}

// â”€â”€â”€ TABS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function showTab(id,el){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('act'));
  document.querySelectorAll('.tc').forEach(t=>t.classList.remove('act'));
  el.classList.add('act');document.getElementById('tc-'+id).classList.add('act');
}

// â”€â”€â”€ SCAN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function runScan(){
  const email=document.getElementById('emailInput').value.trim();
  if(!email){alert('âš  Please paste an email to analyze.');return;}
  const btn=document.getElementById('scanBtn');
  btn.disabled=true;
  document.getElementById('btnTxt').textContent='SCANNING...';
  document.getElementById('btnSpinner').style.display='block';
  document.getElementById('sysStatus').textContent='SCANNING';
  document.getElementById('loadOverlay').classList.add('on');
  document.getElementById('resultsPanel').classList.remove('on');

  const STEPS=['> PARSING EMAIL HEADERS...','> VERIFYING SENDER REPUTATION...','> SCANNING EMBEDDED URLS...','> DETECTING SOCIAL ENGINEERING...','> RUNNING CLAUDE AI MODEL...','> GENERATING THREAT REPORT...'];
  const logEl=document.getElementById('loadLog');logEl.innerHTML='';
  let si=0;
  const si2=setInterval(()=>{if(si<STEPS.length){logEl.innerHTML+=STEPS[si]+'<br>';si++;}},700);

  const prompt=`You are PhishGuard AI, an elite cybersecurity threat intelligence system. Analyze the following email with expert precision and thoroughness.

EMAIL TO ANALYZE:
"""
${email}
"""

Respond with ONLY valid JSON (absolutely no markdown, no code fences):
{
  "riskScore": <integer 0-100>,
  "verdict": "<one of: SAFE | LOW RISK | SUSPICIOUS | DANGEROUS | CRITICAL THREAT>",
  "verdictTagline": "<one compelling sentence summarizing the threat level>",
  "threats": {
    "suspiciousLinks": <0-100>,
    "senderSpoofing": <0-100>,
    "urgencyTactics": <0-100>,
    "socialEngineering": <0-100>
  },
  "explanation": "<3-4 sentences. Reference specific evidence from the email. Explain WHY this is safe or dangerous. Write for a non-technical user but be specific and precise. Use **bold** for key threat indicators.>",
  "redFlags": [
    {"severity":"critical|warning|info","title":"<short flag title>","description":"<one precise sentence with specific evidence>"}
  ],
  "recommendations": ["<specific action 1>","<specific action 2>","<specific action 3>","<specific action 4>"]
}`;

  try{
    const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": "Bearer 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"
  },
  body: JSON.stringify({
    model: "llama-3.3-70b-versatile",   // Recommended Groq model
    messages: [
      {
        role: "system",
        content: "You are PhishGuard AI, an elite cybersecurity threat intelligence system."
      },
      {
        role: "user",
        content: prompt
      }
    ],
    temperature: 0.2,
    max_tokens: 1200
  })
});
    const data=await res.json();
    clearInterval(si2);
    const txt = data.choices[0].message.content;
    let result;
    try{result=JSON.parse(txt.replace(/```json|```/g,'').trim());}
    catch(e){throw new Error('Parse error');}
    renderResults(result);
  }catch(err){
    clearInterval(si2);
    document.getElementById('loadOverlay').classList.remove('on');
    alert('Scan failed: '+err.message);
  }
  btn.disabled=false;
  document.getElementById('btnTxt').textContent='â—ˆ INITIATE THREAT SCAN';
  document.getElementById('btnSpinner').style.display='none';
}

// â”€â”€â”€ RENDER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderResults(r){
  document.getElementById('loadOverlay').classList.remove('on');
  scans++;document.getElementById('scanCount').textContent=String(scans).padStart(3,'0');
  document.getElementById('sysStatus').textContent='COMPLETE';
  document.getElementById('rptTime').textContent=new Date().toLocaleTimeString();

  const s=r.riskScore||0;
  const col=s>=75?'var(--red)':s>=45?'var(--orange)':s>=20?'var(--yellow)':'var(--green)';

  // Arc
  const circ=364.42;
  setTimeout(()=>{const a=document.getElementById('scoreArc');a.style.strokeDashoffset=circ-(s/100)*circ;a.style.stroke=col;},80);

  // Number
  const nEl=document.getElementById('scoreN');nEl.style.color=col;
  let cur=0;const tick=setInterval(()=>{cur=Math.min(cur+2,s);nEl.textContent=cur;if(cur>=s)clearInterval(tick);},18);

  // Verdict
  const ve=document.getElementById('verdictEl');
  ve.textContent=r.verdict||'UNKNOWN';ve.style.color=col;ve.style.borderColor=col;
  ve.style.boxShadow=`0 0 20px -5px ${col}`;
  document.getElementById('vtagEl').textContent=r.verdictTagline||'';
  const tl=s>=75?'HIGH':s>=45?'MED':s>=20?'LOW':'NONE';
  document.getElementById('threatLvl').textContent=tl;
  document.getElementById('threatLvl').style.color=col;

  // Flash
  if(s>=70){const f=document.getElementById('alertFlash');f.classList.remove('fire');void f.offsetWidth;f.classList.add('fire');}

  // Meters + radar
  const t=r.threats||{};
  const mv=[t.suspiciousLinks||0,t.senderSpoofing||0,t.urgencyTactics||0,t.socialEngineering||0];
  const mc=['var(--red)','var(--orange)','var(--yellow)','var(--cyan)'];
  mv.forEach((v,i)=>{
    setTimeout(()=>{document.getElementById('mf'+i).style.width=v+'%';},200+i*80);
    document.getElementById('mv'+i).textContent=v+'%';document.getElementById('mv'+i).style.color=mc[i];
  });
  rt={a:t.suspiciousLinks||0,b:t.senderSpoofing||0,c:t.urgencyTactics||0,d:t.socialEngineering||0};

  // Explain
  const expRaw=r.explanation||'';
  document.getElementById('explainEl').innerHTML=expRaw.replace(/\*\*([^*]+)\*\*/g,'<strong>$1</strong>');

  // Flags
  const fl=document.getElementById('flagsEl');fl.innerHTML='';
  const icons={critical:'ðŸš¨',warning:'âš ï¸',info:'â„¹ï¸'};
  (r.redFlags||[]).forEach((f,i)=>{
    const el=document.createElement('div');
    el.className='flag '+(f.severity||'info');el.style.animationDelay=(i*.1)+'s';
    el.innerHTML=`<span class="fi">${icons[f.severity]||'â€¢'}</span><div><div class="ft">${f.title}</div><div class="fd">${f.description}</div></div>`;
    fl.appendChild(el);
  });

  // Recs
  const rl=document.getElementById('recsEl');rl.innerHTML='';
  (r.recommendations||[]).forEach((rec,i)=>{
    rl.innerHTML+=`<div class="rec"><div class="rn">${i+1}</div><div class="rt">${rec}</div></div>`;
  });

  document.getElementById('resultsPanel').classList.add('on');
  setTimeout(()=>document.getElementById('resultsPanel').scrollIntoView({behavior:'smooth',block:'start'}),100);
}
</script>
</body>
</html>
